<!-- src/app/sensores/components/sensor-table/sensor-table.component.html -->
<div class="overflow-x-auto hidden md:block rounded-xl shadow-sm bg-white border border-gray-100">
  <table class="table w-full">
    <thead class="bg-gray-50 text-gray-700 uppercase text-xs font-semibold tracking-wide">
      <tr>
        <th class="py-3 px-4">Sensor</th>
        <th class="py-3 px-4">Tipo</th>
        <th class="py-3 px-4">Zona</th>
        <th class="py-3 px-4">Invernadero</th>
        <th class="py-3 px-4">Estado</th>
        <th class="py-3 px-4">Última lectura</th>
        <th class="py-3 px-4">Parámetros</th>
        <th class="py-3 px-4">Valores</th>
        <th class="py-3 px-4">Acciones</th>
      </tr>
    </thead>
    <tbody class="text-gray-800 text-sm divide-y divide-gray-100">
      <tr *ngFor="let row of pagedLecturas; let i = index; trackBy: trackBySensor" class="hover:bg-gray-50 transition">
        <td class="py-3 px-4">{{ row.sensor?.nombre || '—' }}</td>
        <td class="py-3 px-4">{{ row.tipoNombre }}</td>
        <td class="py-3 px-4">{{ row.lectura.zona_nombre || '—' }}</td>
        <td class="py-3 px-4">{{ row.lectura.invernadero_nombre || '—' }}</td>
        <td class="py-3 px-4">
          <span
            class="badge"
            [ngClass]="{
              'badge-success': row.sensor?.estado === 'Activo',
              'badge-warning': row.sensor?.estado === 'Advertencia',
              'badge-error': row.sensor?.estado === 'Error' || row.sensor?.estado === 'Crítico'
            }"
          >
            {{ row.sensor?.estado || '—' }}
          </span>
        </td>
        <td class="py-3 px-4">{{ row.lectura.timestamp | date:'short' }}</td>
        <td class="py-3 px-4">{{ row.lectura.parametros.join(', ') || '—' }}</td>
        <td class="py-3 px-4">{{ row.lectura.valores.join(', ') || '—' }}</td>
        <td class="flex flex-wrap gap-2 py-3 px-4">
          <button
            class="btn btn-sm btn-outline"
            (click)="view.emit(row.sensor!)"
            [disabled]="!row.sensor"
          >👁️</button>
          <button
            class="btn btn-sm btn-outline"
            (click)="edit.emit(row.sensor!)"
            [disabled]="!row.sensor"
          >✏️</button>
          <button
            class="btn btn-sm btn-error"
            (click)="delete.emit(row.sensor!)"
            [disabled]="!row.sensor"
          >🗑️</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Paginación -->
  <div class="flex justify-end p-4 gap-2">
    <button
      class="btn btn-sm btn-outline rounded-full"
      (click)="setPage(1)"
      [disabled]="page === 1"
    >«</button>
    <button
      class="btn btn-sm btn-outline rounded-full"
      (click)="setPage(page - 1)"
      [disabled]="page === 1"
    >‹</button>

    <ng-container *ngFor="let p of pages">
      <button
        class="btn btn-sm"
        [ngClass]="{
          'btn-active': page === p,
          'btn-outline': page !== p
        }"
        (click)="setPage(p)"
      >{{ p }}</button>
    </ng-container>

    <button
      class="btn btn-sm btn-outline rounded-full"
      (click)="setPage(page + 1)"
      [disabled]="page === totalPages"
    >›</button>
    <button
      class="btn btn-sm btn-outline rounded-full"
      (click)="setPage(totalPages)"
      [disabled]="page === totalPages"
    >»</button>
  </div>
</div>
