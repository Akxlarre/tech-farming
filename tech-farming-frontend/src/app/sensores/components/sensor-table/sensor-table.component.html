<!-- src/app/sensores/components/sensor-table/sensor-table.component.html -->
<div class="overflow-x-auto hidden md:block rounded-xl shadow-sm bg-white border border-gray-100">
  <table class="table w-full">
    <thead class="bg-gray-50 text-gray-700 uppercase text-xs font-semibold tracking-wide">
      <tr>
        <th class="py-3 px-4">Sensor</th>
        <th class="py-3 px-4">Tipo</th>
        <th class="py-3 px-4">Invernadero</th>
        <th class="py-3 px-4">Estado</th>
        <th class="py-3 px-4">Última lectura</th>
        <th class="py-3 px-4">Acciones</th>
      </tr>
    </thead>
    <tbody class="text-gray-800 text-sm divide-y divide-gray-100">
  <tr *ngFor="let row of mergedLecturas" class="hover:bg-gray-50 transition">
    <!-- Nombre del sensor -->
    <td class="py-3 px-4">
      {{ row.sensor?.nombre || '—' }}
    </td>

    <!-- Nombre legible del tipo -->
    <td class="py-3 px-4">
      {{ row.tipoNombre }}
    </td>

    <!-- Nombre del invernadero -->
    <td class="py-3 px-4">
      {{ row.invernaderoNombre || '—' }}
    </td>

    <!-- Estado con badge -->
    <td class="py-3 px-4">
      <span
        class="badge"
        [ngClass]="{
          'badge-success': row.sensor?.estado === 'Activo',
          'badge-warning': row.sensor?.estado === 'Advertencia',
          'badge-error': row.sensor?.estado === 'Error' || row.sensor?.estado === 'Crítico'
        }"
      >
        {{ row.sensor?.estado || '—' }}
      </span>
    </td>

    <!-- Timestamp de la última lectura -->
    <td class="py-3 px-4">
      {{ row.lectura.timestamp | date: 'short' }}
    </td>

    <!-- Parámetros (todos los acumulados) -->
    <td class="py-3 px-4">
      {{ row.lectura.parametros.join(', ') || '—' }}
    </td>

    <!-- Valores (todos los acumulados) -->
    <td class="py-3 px-4">
      {{ row.lectura.valores.join(', ') || '—' }}
    </td>

    <!-- Botones de acción -->
    <td class="flex flex-wrap gap-2 py-3 px-4">
      <button
        class="btn btn-sm btn-outline"
        (click)="view.emit(row.sensor!)"
        [disabled]="!row.sensor"
      >👁️</button>
      <button
        class="btn btn-sm btn-outline"
        (click)="edit.emit(row.sensor!)"
        [disabled]="!row.sensor"
      >✏️</button>
      <button
        class="btn btn-sm btn-error"
        (click)="delete.emit(row.sensor!)"
        [disabled]="!row.sensor"
      >🗑️</button>
    </td>
  </tr>
</tbody>

  </table>

  <!-- Paginación (puedes adaptarla) -->
  <div class="flex justify-end p-4 gap-2">
    <button class="btn btn-sm btn-outline rounded-full">⏮️</button>
    <button class="btn btn-sm btn-outline btn-active rounded-full">1</button>
    <button class="btn btn-sm btn-outline rounded-full">2</button>
    <button class="btn btn-sm btn-outline rounded-full">3</button>
    <button class="btn btn-sm btn-outline rounded-full">⏭️</button>
  </div>
</div>
